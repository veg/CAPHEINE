// TODO nf-core: Once you have added the required tests, please run the following command to build this file:
// nf-core modules test cleanforegroundlist
nextflow_process {

    name "Test Process CLEAN_FOREGROUND_LIST"
    script "modules/local/cleanforegroundlist/main.nf"
    process "CLEAN_FOREGROUND_LIST"

    tag "modules"
    tag "modules_"
    tag "foregroundlistcleaner"

    test("remove illegal hyphy characters") {

        when {
            process {
                """
                input[0] = file(projectDir + '/tests/test_data/pretend-foreground-list.txt', checkIfExists: true)
                """
            }
        }

        then {
            assert process.success
            assertAll(
                { assert snapshot(
                    process.out,
                    path(process.out.versions[0]).yaml
                ).match() },
                { assert path(process.out.sanitized_list[0]).text.contains("PP563828_1_2023_09_04") }
            )
        }

    }

    test("remove illegal hyphy characters - stub") {

        options "-stub"

        when {
            process {
                """
                input[0] = file(projectDir + '/tests/test_data/pretend-foreground-list.txt', checkIfExists: true)
                """
            }
        }

        then {
            assert process.success
            assertAll(
                { assert snapshot(
                    process.out,
                    path(process.out.versions[0]).yaml
                ).match() }
            )
        }

    }

}
